<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>OpenFreeroll</title>
    <meta name="description" content="freerollio">
    <link href="https://fonts.googleapis.com/css?family=Merriweather" rel="stylesheet">
    <link rel="stylesheet" href="/freerollio/css/style.css">
    <script src="/freerollio/scripts/jquery-3.3.1.min.js"></script>
    <script src="/freerollio/scripts/web3.min.js"></script>
    <script src="/freerollio/js/web3_starter.js"></script>
    <script src="/freerollio/js/main.js"></script>
</head>


<body>

    <!-- Divs to wrap content for sticky footer format -->
    <div class="content-outside">
        <div class="content-inside">

            <!-- Error message for MetaMask detection  -->
            <div class="overlay"></div>
            <div id="primary-container">
                <div class="error-bar">
                    <span class="error-label no-metamask-plugin">You need to <a href="https://metamask.io">install the MetaMask plugin</a> to use freerollio. </span>
                    <span class="error-label no-metamask-accounts">No accounts found. Please make sure MetaMask is unlocked then refresh the page.</span>
                    <span class="error-label invalid-network">Invalid network. Please switch MetaMask to the Ropsten network.</span>
                </div>
            </div>

            <!-- Site header  ------------------------------------------------------------------------------------------------------->
            <header id="site-header">

                <!-- Nav menu -->
                <button class="hamburger" onclick="navButton()">&#9776;</button>
                <button class="cross" onclick="navButton()">&#735;</button>
                <div class="nav-menu">
                    <ul>
                        <a href="https://freeroll.io/" target="_blank"><li>Home</li></a>
                        <a href="https://docs.google.com/document/d/1KjZpuII925CJhYzMB9E7Wq4OfjD8odqNgFK2Z09V-sM/edit?usp=sharing" target="_blank"><li>Projects</li></a>
                        <a href="https://docs.google.com/document/d/1KjZpuII925CJhYzMB9E7Wq4OfjD8odqNgFK2Z09V-sM/edit?usp=sharing" target="_blank"><li>Blog</li></a>
                        <a href="https://docs.google.com/document/d/1KjZpuII925CJhYzMB9E7Wq4OfjD8odqNgFK2Z09V-sM/edit?usp=sharing" target="_blank"><li>Resources</li></a>
                        <a href="https://docs.google.com/document/d/1KjZpuII925CJhYzMB9E7Wq4OfjD8odqNgFK2Z09V-sM/edit?usp=sharing" target="_blank"><li>About</li></a>
                        <a href="https://docs.google.com/document/d/1KjZpuII925CJhYzMB9E7Wq4OfjD8odqNgFK2Z09V-sM/edit?usp=sharing" target="_blank"><li>Contact</li></a>
                    </ul>
                </div>

                <!-- Title, subtitle, and quote -->
                <div id="title-container">
                    <h1 id="header-title">freerollio</h1>
                    <h4 id="header-subtitle">&quot... ability to follow one's own advice."</h4>
                </div>
            </header>


            <!-- Pages main content (intro, post, and search) ---------------------------------------------------------------------------------->
            <div id="content">

                <!-- Short Introduction ----------------------------------------------->
                <div class="dropdown-container">
                    <div class="button-container">
                        <button class="dropdown-button" id="intro-button">Short Introduction</button>
                    </div>

                    <div class="dropdown-content-container" id="intro-text-container">
                        <p>
                            &quotOn one level, wisdom is nothing more profound than an ability to follow one's own advice." - Sam Harris<br /><br />
                            Freerolls increase incentives to follow your own advice.<br /><br />
                            Put your money (ether) where your mouth is. If you fail to complete your goal your money is directed to a friend or charity.<br />
                        </p>
                        <a href="https://docs.google.com/document/d/1KjZpuII925CJhYzMB9E7Wq4OfjD8odqNgFK2Z09V-sM/edit?usp=sharing"><button id="read-more-button" class="float-button">Read More</button></a>
                        <a href="https://docs.google.com/document/d/1KjZpuII925CJhYzMB9E7Wq4OfjD8odqNgFK2Z09V-sM/edit?usp=sharing"><button id="guide-button" class="float-button">Guide (coming soon)</button></a>
                        <div class="clear-float-div"></div>
                    </div>
                    <script type="text/javascript">
                        $("#intro-button").click(function() {
                            $("#intro-text-container").slideToggle("slow");
                            if ($("#intro-button").text() == 'Short Introduction') {
                                $("#intro-button").text("Close Introduction");
                            } else {
                                $("#intro-button").text("Short Introduction");
                            }
                        });
                    </script>
                </div>

                <!-- Post Freeroll -------------------------------------------------->
                <div class="dropdown-container">

                    <!-- Button -->
                    <div class="button-container">
                        <button class="dropdown-button" id="post-button">Post Freeroll</button>
                        <script type="text/javascript">
                            $("#post-button").click(function() {
                                $("#post-container").slideToggle("slow");
                            });
                        </script>
                    </div>

                    <!-- Post Content -->
                    <div id="post-container" class="dropdown-content-container">
                        <h3>Create Your Freeroll</h3>

                        <!-- Description (input string) -->
                        <div id="description-container" class="user-input">

                            <div class="post-info-title-container">Description:</div>

                            <div class="post-input-row">
                                <div class="tooltiptext-container">
                                    <img src="/freerollio/images/grey_questionmark_24px.png" />
                                    <div class="tooltiptext">Make the description of your goal clear, measurable, and objective.<br/>This helps avoid confusion and controversy.<br />Keep it under 140 characters.</div>
                                </div>
                                <input type="text" id="user-description"
                                    placeholder="Description of my goal..."
                                    />
                            </div>
                        </div>
                        <div class="clear-float-div"></div>


                        <!-- Receiver (dropdown) -->
                        <div id="receiver-container" class="user-input">
                            <div class="post-info-title-container">Receiver:</div>

                            <div class="post-input-row">
                                <div class="tooltiptext-container">
                                    <img src="/freerollio/images/grey_questionmark_24px.png" />
                                    <div class="tooltiptext">Select a charity or enter a friends ethereum address.<br /> This is where the funds will be directed if you fail to complete your goal.</div>
                                </div>
                                <select class="post-select" id="user-receiver">
                                    <option value="" style="color:grey">Select a receiver</option>
                                    <option value="0" style="color:black">GiveDirectly</option>
                                    <option value="1" style="color:black">Heifer International</option>
                                    <option value="2" style="color:black">freerollio creator</option>
                                    <option value="3" style="color:black">Friend / Other</option>
                                </select>
                                <div class="post-info-input-container">
                                    <input type="text" id="user-input-receiver"
                                        placeholder="Ethereum address of receiver"
                                        />
                                </div>
                            </div>
                            <script>
                            $("#user-receiver").change(function() {
                                $("#user-receiver").css("color", "black");

                                var val = $(this).val();
                                if(val == '3') {
                                    $("#user-input-receiver").slideToggle("slow");
                                    console.log('here in friend');
                                } else {
                                    $("#user-input-receiver").hide();
                                }
                            });
                            </script>

                        </div>
                        <div class="clear-float-div"></div>


                        <!-- Amount (input string) -->
                        <div id="amount-container" class="user-input">
                            <div class="post-info-title-container">Amount:</div>

                            <div class="post-input-row">
                                <div class="tooltiptext-container">
                                    <img src="/freerollio/images/grey_questionmark_24px.png" />
                                    <div class="tooltiptext"><a href="https://ethereumprice.org/">Click here</a> to see the current exchange rate of ethereum.</div>
                                </div>
                                <input type="text" id="user-amount-eth"
                                    placeholder="Wager amount in ETH"
                                    />
                            </div>
                        </div>
                        <div class="clear-float-div"></div>


                        <!-- Duration (input number) -->
                        <div id="duration-container" class="user-input">
                            <div class="post-info-title-container">Duration:</div>

                            <div class="post-input-row">
                                <div class="tooltiptext-container">
                                    <img src="/freerollio/images/grey_questionmark_24px.png" />
                                    <div class="tooltiptext">Enter in days how long you have to complete your goal.<br />Example: If you want 36 hours, enter 1.5</div>
                                </div>
                                <input type="text" id="user-duration"
                                    placeholder="Number of days to complete your goal"
                                    >
                            </div>
                        </div>
                        <div class="clear-float-div"></div>


                        <!-- Result Location (input string) -->
                        <div id="results-container" class="user-input">
                            <div class="post-info-title-container">Results Location:</div>

                            <div class="post-input-row">
                                <div class="tooltiptext-container">
                                    <img src="/freerollio/images/grey_questionmark_24px.png" />
                                    <div class="tooltiptext">Where on the web are you going to publish and verify that you achieved your goal.<br />This field is optional.</div>
                                </div>
                                <input type="text" id="user-location"
                                    placeholder="www.exactUrlOfResults.com (optional)"
                                    >
                            </div>
                        </div>
                        <div class="clear-float-div"></div>


                        <!-- Category (dropdown) -->
                        <div id="receiver-container" class="user-input">
                            <div class="post-info-title-container">Category:</div>

                            <div class="post-input-row">
                                <div class="tooltiptext-container">
                                    <img src="/freerollio/images/grey_questionmark_24px.png" />
                                    <div class="tooltiptext">Chose a category to help those browsing and supporting your freeroll.</div>
                                </div>
                                <select class="post-select" id="user-category">
                                    <option value="" style="color:grey">Select a category</option>
                                    <option value="0" style="color:black">Health</option>
                                    <option value="1" style="color:black">New skill</option>
                                    <option value="2" style="color:black">Work / School</option>
                                    <option value="3" style="color:black">Other</option>
                                </select>

                                <script>
                                $("#user-category").change(function() {
                                    $("#user-category").css("color", "black");
                                });
                                </script>
                            </div>
                        </div>
                        <div class="clear-float-div"></div>


                        <!-- Review button -->
                        <div><button id="review-container-button" onclick="fireUponReviewClick()">Review</button></div>
                    <!-- End post container -->
                    </div>
                <!-- End Dropdown container -->
                </div>



                <!-- Search  ------------------------------------------------------------>
                <div id="search-container">

                    <!-- Search Title -->
                    <div class="search-title-container">
                        <div class="title-container">
                            <div>Community's Freerolls</div>
                        </div>
                        <div class="filter-link-container">
                            <a class="filter-link" id="filter-link">Show Filter</a>
                        </div>
                    </div>

                    <!-- Filter Dropdown -->
                    <div class="dropdown-content-container" id="filter-container">

                        <div class="filter-row">
                            <div class="category">
                                Status:
                            </div>
                            <div class="filter-button-container">
                                <div class="filter-button-edge">
                                    <div id="filter-active" class="filter-button-middle">
                                        Active
                                    </div>
                                </div>
                                <div class="filter-button-edge">
                                    <div id="filter-expired" class="filter-button-middle">
                                        Expired
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br style="clear:both;"/>

                        <div class="filter-row">
                            <div class="category">
                                Poster:
                            </div>
                            <div class="filter-button-container">
                                <div class="filter-button-edge">
                                    <div id="filter-community" class="filter-button-middle">
                                        Community
                                    </div>
                                </div>
                                <div class="filter-button-edge">
                                    <div id="filter-you" class="filter-button-middle">
                                        You
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br style="clear:both;"/>

                        <div class="filter-row">
                            <div class="category">
                                Value:
                            </div>
                            <div class="filter-button-container">
                                <div class="filter-button-edge">
                                    <div id="filter-low" class="filter-button-middle">
                                        Low
                                    </div>
                                </div>
                                <div class="filter-button-edge">
                                    <div id="filter-high" class="filter-button-middle">
                                        High
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br style="clear:both;"/>

                        <div class="filter-row">
                            <div class="receiver">
                                Receiver:
                            </div>
                            <div class="filter-button-container">
                                <div class="filter-button-edge">
                                    <div id="filter-charity"class="filter-button-middle">
                                        Charity
                                    </div>
                                </div>
                                <div class="filter-button-edge">
                                    <div id="filter-noncharity" class="filter-button-middle">
                                        Other
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br style="clear:both;"/>

                        <div class="filter-row">
                            <div class="category">
                                Category:
                            </div>
                            <div class="filter-button-container">
                                <div class="filter-button-edge">
                                    <div id="filter-health" class="filter-button-middle">
                                        Health
                                    </div>
                                </div>
                                <div class="filter-button-edge">
                                    <div id="filter-newskill" class="filter-button-middle">
                                        New Skill
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br style="clear:both;"/>
                        <div class="filter-row">
                            <div class="category">

                            </div>
                            <div class="filter-button-container">
                                <div class="filter-button-edge">
                                    <div id="filter-workschool" class="filter-button-middle">
                                        Work / School
                                    </div>
                                </div>
                                <div class="filter-button-edge">
                                    <div id="filter-othercat" class="filter-button-middle">
                                        Other
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br style="clear:both;"/>

                    <script type="text/javascript">
                        $(".filter-button-middle").click(function() { // Any button

                            if ($(this).attr("class") == "filter-button-middle unselected") { // If is not selected
                                $(this).removeClass("unselected");
                            } else {
                                $(this).addClass("unselected"); // Add selected class
                            }
                            fireUponFilterChange();
                        });
                    </script>

                    </div>

                    <script type="text/javascript">
                        $("#filter-link").click(function() {
                            $("#filter-container").slideToggle("slow");

                            if ($("#filter-link").text() == 'Show Filter') {
                                $("#filter-link").text("Close Filter");
                            } else {
                                $("#filter-link").text("Show Filter");
                            }
                        });
                    </script>

                    <div class="log-results-container">

                        <div id="query-results"></div>

                        <div id="no-more-results-category"> <!-- Hidden by default -->
                            <p class="search-complete">Search complete</p>
                        </div>

                        <div id="searching-blockchain"> <!-- Shown by default -->
                              <p>Scanning the Ethereum blockchain for freerolls...</p>
                              <div class="spinner"></div>
                        </div>

                        <div id="loadmore-button-container"> <!-- Hidden by default -->
                            <a class="loadmore-link" onclick="loadmoreButton()">Load more</a>
                        </div>
                    </div>
                </div> <!-- End search -->
            </div> <!-- End content -->
        </div> <!-- End content-inside -->
    </div> <!-- End content-outside -->


    <!-- Modals ----------------------------------------------------------------------------------------------------->

     <!-- Details Modal ------------------------------------------------------->
    <div id="details-modal" class="modal">

        <!-- Modal content -->
        <div class="modal-content content-left">
            <div class="modal-title">
                <span onClick="closeModal()" class="close">&times;</span>
                <h3>Freeroll Contract</h3>
                <div class="details-address-container">
                    <a id="details-sub-header" class="modal-sub-header-a" href=""></a>
                </div>


            </div>

            <div class="modal-body">
                <div id="details-load-message" class="load-message">
                    <p>Searching Blockchain for Contract Details ...</p>
                    <div class="spinner"></div>
                </div>
                <div id="details-body-data" class="modal-body-data">
                    <div class="modal-item"><span><p>Freeroll poster:&nbsp;</p><a id="modal-poster"></a></span></div>
                     <div class="modal-item"><span><p>Stated on:&nbsp;</p><p id="modal-dateposted" class="vital-content"></p></span></div>
                     <div class="modal-item"><span><p>That he must accomplish:&nbsp;</p><p id="modal-description" class="vital-content"></p></span></div>
                     <div class="modal-item"><span><p>Within:&nbsp;</p><p id="modal-duration" class="vital-content"></p></span></div>
                     <div class="modal-item"><span><p>And by no later than:&nbsp;</p><p id="modal-expiration" class="vital-content"></p></span></div>
                     <div class="modal-item"><span><p>Or forfit the entire balance of:&nbsp;</p><p id="modal-value" class="vital-content"></p></span></div>
                    <div class="modal-item"><span><p>To the freeroll receiver:&nbsp;</p><a id="modal-receiver" class="vital-content"></a></span></div>
                    <div class="modal-item"><span><p id="modal-location-avail"></p><a id="modal-location" class="vital-content"></a></span></div>
                     <div class="modal-item"><span><p>The poster has agreed to act in accordance to the system of:&nbsp;</p><p id="modal-trust" class="vital-content"></p></span></div>
                    <div class="modal-body-border"></div>
                     <div class="modal-item"><span><p>Freeroll Deadline:&nbsp;</p><p id="modal-deadline" class="vital-content"></p></span></div>
                     <div class="modal-item"><span><p>Outcome:&nbsp;</p><p id="modal-outcome" class="vital-content"></p></span></div>
                     <div class="modal-item"><span><p>Unpaid Balance:&nbsp;</p><p id="modal-remaining-balance" class="vital-content"></p></span></div>
                    <div class="modal-body-border"></div>

                    <div class="modal-button-container">
                        <button id="claim-victory" class="valid-button"onClick="claimVictory()">Claim Victory</button>
                        <button id="claim-victory-grey" class="greyout-button">Claim Victory</button>
                        <button id="payout" class="valid-button" onClick="payoutFreeroll()">Payout</button>
                        <button id="payout-grey" class="greyout-button">Payout</button>
                        <div class="clear-float-div"></div>
                    </div>
                </div>

            </div>
        </div>
    </div> <!-- End details modal -->

    <!-- Review Modal --------------------------------------------------------->
    <div id="review-modal" class="modal">

        <!-- Modal content -->
        <div id="review-modal-content" class="modal-content content-right">
            <div class="modal-title">
                <span onClick="closeModal()" class="close">&times;</span>
                <h3>Review Freeroll Contract</h3>
                <a id="review-subtitle" class="modal-sub-header-a" href="">Address TBD</a>



            </div>
            <div id="review-body" class="modal-body">

                <div id="review-body-data" class="modal-body-data">
                    <div class="modal-item"><span><p>You, owner of ethereum account at address:&nbsp;</p><a id="review-poster"></a></span></div>
                    <div class="modal-item"><span><p>Must accomplish the following:&nbsp;</p><p id="review-description" class="vital-content"></p></span></div>
                    <div class="modal-item"><span><p>Within:&nbsp;</p><p id="review-duration" class="vital-content"></p><p>of the contract creation (starting upon contracts confirmation).</p></span></div>
                    <div class="modal-item"><span><p>Or the entire balance of the contract:&nbsp;</p><p id="review-amount" class="vital-content"></p></span></div>
                    <div class="modal-item"><span><p>Will transfer rights to the freeroll receiver you specified:&nbsp;</p><a id="review-receiver" class="vital-content"></a></span></div>
                    <div class="modal-item"><span><p id="review-location-mess"></p><a id="review-location" class="vital-content"></a></span></div>
                    <div class="modal-item"><span><p>You agree to act in accordance to the system of:&nbsp;</p><p id="review-trust" class="vital-content"></p></span></div>

                    <div class="modal-body-border"></div>

                    <div id="review-load-message" class="load-message">
                        <p>Retreiving Blockchain Information...</p>
                        <div class="spinner"></div>
                    </div>

                    <div id="submitting-load-message" class="load-message" style="display:none">
                        <p>Submitting your Freeroll to the blockchain...</p>
                        <div class="spinner"></div>
                    </div>

                    <div id="txHash-submitted-message" class="after-submit-container" style="display:none">
                        <h3 class="freeroll_submitted">Freeroll Submitted</h3>
                        <p>Your Freeroll has been submitted to the blockchain. You can track it using this <a id="txHash" href=""><b>transaction identifier</b></a> or in your MetaMask extension. Once it is accepted you should see it appear with the other Community Freerolls. Good luck with your goal.</p>
                    </div>

                    <div id="txHash-rejected-message" class="after-submit-container" style="display:none">
                        <h3 class="freeroll_submitted">Freeroll Rejected</h3>
                        <p>Your Freeroll has been rejected for submittal to the blockchain. Please feel free to contact us if you can not figure out the issue.</p>
                    </div>

                    <div id="blockchain-review-information" style="display:none">
                        <select class="post-select" id="gas-price" onchange="populateEstimates(this)">
                            <option value="" style="color:grey">Select Gas Price</option>
                            <option value="low" style="color:black">Low (<30min)</option>
                            <option value="standard" style="color:black" selected="selected">Standard (<5min)</option>
                            <option value="fast" style="color:black">High (<2min)</option>
                        </select>

                        <div class="modal-item"><span><p>Estimated Freeroll Deadline:&nbsp;</p><p id="modal-est-deadline" class="vital-content"></p></span></div>
                        <div class="modal-item"><span><p>Estimated Deployment Cost:&nbsp;</p><p id="modal-deploy-cost" class="vital-content"></p></span></div>
                        <div class="modal-item"><span><p>Estimated Claim Victory Cost:&nbsp;</p><p id="modal-claim-cost" class="vital-content"></p></span></div>
                        <div class="modal-body-border"></div>

                        <div class="modal-button-container">
                            <button id="cancel-post" class="valid-button" onClick="closeModal()">Cancel</button>
                            <button id="submit-post" class="valid-button" onclick="submitFreeroll()">Submit</button>
                            <div class="clear-float-div"></div>
                        </div>
                    </div>
                </div> <!-- End review-body-data -->
            </div>
        </div>
    </div> <!-- End Review Modal -->


    <!-- Footer ----------------------------------------------------------------------------------------------------------------------------->
    <footer>
        <a href="http://www.tedslocum.com">&copy sted9000</a>
    </footer>
</body>
